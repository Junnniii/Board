<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--  <mapper namespace="jun.spring.prj">
 	<select id="selectAll" resultType="DeptDTO">
 		select
 		deptno, dname, loc
 		from dept
 	</select>
 	
 	<insert id="insert" parameterType="DeptDTO">
 		insert
 		into dept (deptno, dname, loc)
 		values(#{deptno}, #{dname}, #{loc})
 	</insert>
 	 
 	<select id="select" parameterType="DeptDTO" resultType="DeptDTO">
 		select
 		deptno, dname, loc
 		from dept
 		where
 		deptno = #{deptno}
 	</select>
 	
 	<update id="update" parameterType="DeptDTO">
 		update
 		dept set dname = #{dname}, loc=#{loc}
 		where deptno = #{deptno}
 	</update>
 	
 	<delete id="delete" parameterType="DeptDTO">
 		delete
 		from dept
 		where deptno = #{deptno}
 	</delete>
 </mapper> -->
 <mapper namespace="jun.spring.prj.board1">
 	<select id="getList" resultType="BoardViewEntity" parameterType="jun.spring.prj.board1.service.jdbc.QueryVO">
 		select * from board1_view where 
 		<if test="field=='title' &amp;&amp; query != null">
 		title like '%'||#{query}||'%' and 
 		</if>
 		<if test="field=='writer_id' &amp;&amp; query != null">
 		writer_id like '%'||#{query}||'%' and 
 		</if>
 		num between #{start} and #{end}
 	</select>
 	
 	<select id="getBoard" resultType="BoardEntity">
 		select * from board1 where id = #{id}
 	</select>
 	
 	<insert id="regBoard" parameterType="BoardEntity">
 		insert into board1 (id,title,writer_id,content,files) values (SEQ_ID.nextval,#{title},#{writer_id},#{content},#{files})
 	</insert>
 	
 	<update id="countHit">
 		update board1 set hit = hit + 1 
 		where id = #{id}
 	</update>
 </mapper>